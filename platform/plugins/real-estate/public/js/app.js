(()=>{var t={5827:()=>{var t=function(t,r){var e="";$.each(t,(function(t,r){e+=r+"<br />"})),$(r).find(".success-message").html("").hide(),$(r).find(".error-message").html("").hide(),$(r).find(".error-message").html(e).show()};function r(t){this.$container=t,this.$avatarView=this.$container.find(".avatar-view"),this.$avatar=this.$avatarView.find("img"),this.$avatarModal=this.$container.find("#avatar-modal"),this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}r.prototype={constructor:r,support:{fileList:!!$('<input type="file">').prop("files"),fileReader:!!window.FileReader,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.fileReader,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarView.on("click",$.proxy(this.click,this)),this.$avatarInput.on("change",$.proxy(this.change,this)),this.$avatarForm.on("submit",$.proxy(this.submit,this))},initModal:function(){this.$avatarModal.modal("hide"),this.initPreview()},initPreview:function(){var t=this.$avatar.prop("src");this.$avatarPreview.empty().html('<img src="'+t+'" alt="avatar">')},initIframe:function(){var t="avatar-iframe-"+Math.random().toString().replace(".",""),r=$('<iframe name="'+t+'" style="display:none;"></iframe>'),e=!0,a=this;this.$iframe=r,this.$avatarForm.attr("target",t).after(r),this.$iframe.on("load",(function(){var t,r,o;try{r=this.contentWindow,t=(o=(o=this.contentDocument)||r.document)?o.body.innerText:null}catch(t){}t?a.submitDone(t):e?e=!1:$("#print-msg").text("Image upload failed!").removeClass("hidden"),a.submitEnd()}))},click:function(){this.$avatarModal.modal("show")},change:function(){var t,r;this.support.datauri?(t=this.$avatarInput.prop("files")).length>0&&(r=t[0],this.isImageFile(r)&&this.read(r)):(r=this.$avatarInput.val(),this.isImageFile(r)&&this.syncUpload())},submit:function(){return this.$avatarSrc.val()||this.$avatarInput.val()?this.support.formData?(this.ajaxUpload(),!1):void 0:(alert("Please select image!"),!1)},isImageFile:function(t){return t.type?/^image\/\w+$/.test(t.type):/\.(jpg|jpeg|png|gif)$/.test(t)},read:function(t){var r=this,e=new FileReader;e.readAsDataURL(t),e.onload=function(){r.url=this.result,r.startCropper()}},startCropper:function(){var t=this;this.active?this.$img.cropper("replace",this.url):(this.$img=$('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,rotatable:!0,preview:this.$avatarPreview.selector,done:function(r){var e=['{"x":'+r.x,'"y":'+r.y,'"height":'+r.height,'"width":'+r.width+"}"].join();t.$avatarData.val(e)}}),this.active=!0)},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var r=this.$avatarForm.attr("action"),e=new FormData(this.$avatarForm[0]),a=this;$.ajax(r,{type:"post",data:e,processData:!1,contentType:!1,beforeSend:function(){a.submitStart()},success:function(t){a.submitDone(t)},error:function(r){!function(r,e){if(void 0===r.errors||_.isArray(r.errors))if(void 0!==r.responseJSON)if(void 0!==r.responseJSON.errors)422===r.status&&t(r.responseJSON.errors,e);else if(void 0!==r.responseJSON.message)$(e).find(".error-message").html(r.responseJSON.message).show();else{var a="";$.each(r.responseJSON,(function(t,r){$.each(r,(function(t,r){a+=r+"<br />"}))})),$(e).find(".error-message").html(a).show()}else $(e).find(".error-message").html(r.statusText).show();else t(r.errors,e)}(r)},complete:function(){a.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn(),this.$avatarSave.attr("disabled",!0).text("Saving...")},submitDone:function(t){try{t=$.parseJSON(t)}catch(t){}t&&!t.error?t.error?$("#print-msg").text(t.message).removeClass("hidden"):(this.url=t.data.url,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):$("#print-msg").text(t.message).removeClass("hidden")},submitEnd:function(){this.$loading.fadeOut(),this.$avatarSave.removeAttr("disabled").text("Save")},cropDone:function(){this.$avatarSrc.val(""),this.$avatarData.val(""),this.$avatar.prop("src",this.url),$(".user-menu img").prop("src",this.url),$(".user.dropdown img").prop("src",this.url),this.stopCropper(),this.initModal()}},$((function(){new r($(".crop-avatar"))}))},4452:()=>{$(document).ready((function(){$(".custom-select-image").on("click",(function(t){t.preventDefault(),$(this).closest(".image-box").find(".image_input").trigger("click")})),$(".image_input").on("change",(function(){!function(t){if(t.files&&t.files[0]){var r=new FileReader;r.onload=function(r){$(t).closest(".image-box").find(".preview_image").prop("src",r.target.result)},r.readAsDataURL(t.files[0])}}(this)}))}))}},r={};function e(a){var o=r[a];if(void 0!==o)return o.exports;var i=r[a]={exports:{}};return t[a](i,i.exports,e),i.exports}(()=>{"use strict";function t(r){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(r)}function r(r,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,(i=o.key,n=void 0,n=function(r,e){if("object"!==t(r)||null===r)return r;var a=r[Symbol.toPrimitive];if(void 0!==a){var o=a.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}(i,"string"),"symbol"===t(n)?n:String(n)),o)}var i,n}var a=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,o;return e=t,o=[{key:"showNotice",value:function(t,r,e){toastr.clear(),toastr.options={closeButton:!0,positionClass:"toast-bottom-right",onclick:null,showDuration:1e3,hideDuration:1e3,timeOut:1e4,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr[t](r,e)}},{key:"showError",value:function(t){this.showNotice("error",t,window.trans&&window.trans.error?window.trans.error:"Error!")}},{key:"showSuccess",value:function(t){this.showNotice("success",t,window.trans&&window.trans.success?window.trans.success:"Success!")}},{key:"handleError",value:function(r){void 0!==r.responseJSON?void 0!==r.responseJSON.message?t.showError(r.responseJSON.message,window.trans&&window.trans.error?window.trans.error:"Error!"):$.each(r.responseJSON,(function(r,e){$.each(e,(function(r,e){t.showError(e,window.trans&&window.trans.error?window.trans.error:"Error!")}))})):t.showError(r.statusText,window.trans&&window.trans.error?window.trans.error:"Error!")}}],(a=null)&&r(e.prototype,a),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e(4452),e(5827),$(document).ready((function(){window.noticeMessages&&window.noticeMessages.forEach((function(t){a.showNotice(t.type,t.message,"error"===t.type?window.trans&&window.trans.error?window.trans.error:"Error!":window.trans&&window.trans.success?window.trans.success:"Success!")})),$(document).on("click",".button-renew",(function(t){t.preventDefault();var r=$(t.currentTarget);$(".button-confirm-renew").data("section",r.prop("href")).data("parent-table",r.closest(".table").prop("id")),$(".modal-confirm-renew").modal("show")})),$(".button-confirm-renew").on("click",(function(t){t.preventDefault();var r=$(t.currentTarget),e=r.data("section");r.addClass("button-loading"),$.ajax({url:e,type:"POST",success:function(t){t.error?a.showError(t.message):(window.LaravelDataTables[r.data("parent-table")].row($('a[data-section="'+e+'"]').closest("tr")).remove().draw(),a.showSuccess(t.message)),r.closest(".modal").modal("hide"),r.removeClass("button-loading")},error:function(t){a.handleError(t),r.removeClass("button-loading")}})})),$(document).on("click",".btn_remove_image",(function(t){t.preventDefault(),$(t.currentTarget).closest(".image-box").find(".preview-image-wrapper").hide(),$(t.currentTarget).closest(".image-box").find(".image-data").val("")}));var t=function(t){$.ajax({url:t,type:"GET",success:function(t){var r=t.error,e=t.message,o=t.data;r?a.showError(e):($(".order-detail-box").html(o),a.showSuccess(e))},error:function(t){a.handleError(t)}})};$(document).on("click",".toggle-coupon-form",(function(){return $(document).find(".coupon-form").toggle("fast")})).on("click",".apply-coupon-code",(function(r){r.preventDefault();var e=$(r.currentTarget);$.ajax({url:e.data("url"),type:"POST",data:{coupon_code:e.closest("form").find('input[name="coupon_code"]').val()},beforeSend:function(){e.addClass("button-loading")},success:function(r){var e=r.error,o=r.message;if(e)a.showError(o);else{a.showSuccess(o);var i=$(".order-detail-box").data("refresh-url");t(i)}},error:function(t){a.handleError(t)},complete:function(){e.removeClass("button-loading")}})})).on("click",".remove-coupon-code",(function(r){r.preventDefault();var e=$(r.currentTarget);$.ajax({url:e.data("url"),type:"POST",beforeSend:function(){e.addClass("button-loading")},success:function(r){var e=r.message;if(r.error)a.showError(e);else{a.showSuccess(e);var o=$(".order-detail-box").data("refresh-url");t(o)}},error:function(t){a.handleError(t)},complete:function(){e.removeClass("button-loading")}})}))}))})()})();